---
description: USE WHEN accessing external HTTP APIs; require UnifiedAPIClient, retry/backoff, rate limit, circuit breaker, timeouts.
globs: ["src/**/*client*.py", "src/**/api_*.py", "src/**/api*.py"]
alwaysApply: false
---

# API Client Rules

## Contract

- All HTTP calls via `UnifiedAPIClient`.
- Retries: Exponential backoff with jitter; give up on non-retryable 4xx.
- Throttling: Token bucket with jitter; respect Retry-After.
- Circuit breaker to prevent cascades.
- TTL cache for expensive reads.
- Strict timeouts; include proper User-Agent and required headers.
- Handle pagination consistently.

## Error Handling

- Log status_code, retry_after, url; re-raise as domain errors where appropriate.

## Reference

See `docs/infrastructure/clients/00-clients-overview.md` for detailed documentation.
