---
trigger: model_decision
description: USE WHEN handling secrets or configuration; env/secret manager only; typed Pydantic configs; profiles; validation
globs: [".env*", "configs/**/*.yaml", "src/**/config*.py", "src/**/*.py"]
---

# Secrets and Config

## Secrets

- Never hardcode or log secrets; load from env or secret manager; support rotation; CI scans for leaks.
- If required secret is missing or invalid, stop at startup with a clear error; do not proceed with dummy defaults.

## Config

- Typed models via Pydantic; validate on load; profile inheritance for shared defaults.
- Precedence: env > CLI overrides > pipeline config > profiles.
- If required config missing or invalid, stop execution with actionable error.

## Example

```python
# BAD
API_TOKEN = "abcd1234"

# GOOD
import os
API_TOKEN = os.environ["API_TOKEN"]
```

## Reference

See `docs/02-pipelines/config/28-config-resolver.md` and `docs/02-pipelines/config/29-secret-provider.md` for detailed documentation.
