---
trigger: model_decision
description: USE WHEN naming classes, functions, modules, pipelines, tests, or configs; enforce role suffixes and function prefixes
globs: ["src/**/*.py", "tests/**/*.py", "configs/**/*.yaml"]
---

# Entity Naming Policy

## Basic Rules

- **Modules**: `^[a-z0-9_]+$` (snake_case)
- **Classes**: PascalCase, `^[A-Z][A-Za-z0-9]+$`
- **Functions**: snake_case, `^[a-z_][a-z0-9_]*$`
- **Constants**: UPPER_SNAKE_CASE, `^[A-Z][A-Z0-9_]*$`
- **Private**: leading `_`

## Class Suffixes (Roles)

- `Factory` — general factories
- `ClientFactory` — client factories
- `DataClient` — contract implementations
- `Client` — general clients
- `Facade` — top-level facades
- `Registry` — registries
- `Adapter`/`Transport` — low-level adapters/transports
- `Protocol`/`ABC` — contracts
- `Config`/`Model`/`Params` — configuration/model types
- `Error` — exceptions
- `Impl` — implementations (e.g., `ChemblDataClientHTTPImpl`)

## Function Prefixes

- `get_` — cheap local reads
- `fetch_` — network/IO operations
- `iter_` — lazy generators/iterators
- `create_`/`build_`/`make_`/`default_` — object creation/factories
- `register_` — registry registration
- `resolve_`/`ensure_` — normalization/preparation
- `validate_`/`parse_`/`serialize_` — validation/parsing/serialization
- `on_` — callbacks/handlers
- `is_`/`has_`/`can_` — boolean checks

## Pipelines

- Path: `src/bioetl/application/pipelines/<provider>/<entity>/<stage>.py`
- Provider: `^[a-z0-9_]+$`
- Entity: `^[a-z0-9_]+$`
- Stage: `extract`, `transform`, `validate`, `normalize`, `export`, `write`, `run`, `errors`, `descriptor`, `metrics`, `backfill`, `cleanup`
- Pipeline identifiers: `{entity}_{source}` (lowercase)

## Tests

- Unit: `tests/bioetl/.../test_<module>.py`
- Pipeline: `tests/bioetl/application/pipelines/<provider>/<entity>/test_<stage>.py`
- Integration: `tests/integration/` or suffix `_integration.py`
- Golden: `tests/golden/test_<area>_golden.py`

## Configs

- Files: `^[a-z0-9_]+.ya?ml$` in `configs/`
- Pipelines: `configs/pipelines/<provider>/<entity>.yaml`
- Keys inside YAML: lower_snake_case

## Examples

Valid:
- Class: `ChemblDataClient`, `DataClientProtocol`, `ChemblDataClientHTTPImpl`
- Function: `fetch_one()`, `iter_pages()`, `default_chembl_data_client()`
- Module: `data_client.py`, `factories.py`
- Pipeline: `src/bioetl/application/pipelines/chembl/activity/extract.py`
- Test: `tests/bioetl/application/pipelines/chembl/activity/test_extract.py`

Invalid:
- Class: `chemblDataClient`, `Data_Client`
- Function: `FetchOne()`, `getData()`
- Module: `DataClient.py`, `data-client.py`

## Reference

See `docs/project/00-rules-summary.md` (раздел 3 — именование сущностей) for detailed policy.
