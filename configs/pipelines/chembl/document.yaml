# Document Pipeline Configuration
# Наследует общие параметры из chembl_default profile

extends: chembl_default

entity_name: document
endpoint: /document
primary_key: document_chembl_id


pipeline:
  name: document_chembl
  version: "1.0.0"
  owner: "Data Acquisition Team"
  description: "Extract document records from ChEMBL API"

sources:
  chembl:
    provider: chembl
    batch_size: 10
    base_url: "https://www.ebi.ac.uk/chembl/api/data"
    max_url_length: 2000

cli:
  input_file: data/input/document.csv
  input_full_dataset: false

fields:
  - name: abstract
    data_type: string
    is_nullable: true
    is_filterable: true
    description: Аннотация документа

  - name: authors
    data_type: string
    is_nullable: true
    is_filterable: true
    description: Строка с авторами

  - name: contact
    data_type: string
    is_nullable: true
    is_filterable: false
    description: Контакт для deposited datasets

  - name: doc_type
    data_type: string
    is_nullable: false
    is_filterable: true
    description: Тип документа (PUBLICATION, DATASET, PATENT и т.п.)

  - name: document_chembl_id
    data_type: string
    is_nullable: false
    is_filterable: true
    description: ChEMBL ID документа

  - name: doi
    data_type: string
    is_nullable: true
    is_filterable: true
    description: DOI публикации

  - name: doi_chembl
    data_type: string
    is_nullable: true
    is_filterable: false
    description: Внутренний DOI ChEMBL для датасетов

  - name: first_page
    data_type: string
    is_nullable: true
    is_filterable: false
    description: Первая страница

  - name: issue
    data_type: string
    is_nullable: true
    is_filterable: false
    description: Номер выпуска

  - name: journal
    data_type: string
    is_nullable: true
    is_filterable: true
    description: Сокращённое название журнала

  - name: journal_full_title
    data_type: string
    is_nullable: true
    is_filterable: false
    description: Полное название журнала

  - name: last_page
    data_type: string
    is_nullable: true
    is_filterable: false
    description: Последняя страница

  - name: patent_id
    data_type: string
    is_nullable: true
    is_filterable: true
    description: Идентификатор патента

  - name: pubmed_id
    data_type: string
    is_nullable: true
    is_filterable: true
    description: PubMed ID

  - name: score
    data_type: number
    is_nullable: true
    is_filterable: false
    description: Score для поискового ранжирования

  - name: src_id
    data_type: integer
    is_nullable: true
    is_filterable: true
    description: ID источника (журнал, WDI, deposited и т.п.)

  - name: title
    data_type: string
    is_nullable: false
    is_filterable: true
    description: Заголовок статьи/документа

  - name: volume
    data_type: string
    is_nullable: true
    is_filterable: false
    description: Том

  - name: year
    data_type: integer
    is_nullable: true
    is_filterable: true
    description: Год публикации

  - name: chembl_release_id
    data_type: integer
    is_nullable: true
    is_filterable: false
    description: ID релиза ChEMBL, в котором документ появился

hashing:
    business_key_fields:
      - document_chembl_id
# pagination наследуется из chembl_default profile
