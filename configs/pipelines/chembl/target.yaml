# Target Pipeline Configuration
# Наследует общие параметры из chembl_default profile

extends: chembl_default

entity_name: target
endpoint: /target
primary_key: target_chembl_id

pipeline:
  name: target_chembl
  version: "1.0.0"
  owner: "Data Acquisition Team"
  description: "Extract target records from ChEMBL API"

sources:
  chembl:
    provider: chembl
    batch_size: 25
    base_url: "https://www.ebi.ac.uk/chembl/api/data"
    max_url_length: 2000

cli:
  input_file: data/input/target.csv
  input_full_dataset: false

fields:
  - name: target_chembl_id
    data_type: string
    is_nullable: false
    is_filterable: true
    description: ChEMBL ID таргета

  - name: pref_name
    data_type: string
    is_nullable: true
    is_filterable: true
    description: Название таргета

  - name: score
    data_type: number
    is_nullable: true
    is_filterable: false
    description: Score, используемый при поиске

  - name: organism
    data_type: string
    is_nullable: true
    is_filterable: true
    description: Организм

  - name: target_type
    data_type: string
    is_nullable: false
    is_filterable: true
    description: Тип таргета (SINGLE PROTEIN, PROTEIN FAMILY, ORGANISM и т.п.)

  - name: tax_id
    data_type: integer
    is_nullable: true
    is_filterable: true
    description: NCBI TaxID

  - name: species_group_flag
    data_type: boolean
    is_nullable: true
    is_filterable: false
    description: Флаг «группового» таргета по видам

  - name: target_components
    data_type: array
    is_nullable: true
    is_filterable: false
    description: Компоненты таргета (UniProt-последовательности и др.)

  - name: cross_references
    data_type: array
    is_nullable: true
    is_filterable: false
    description: Внешние кросс-референсы

hashing:
  business_key_fields:
    - target_chembl_id
# pagination наследуется из chembl_default profile
