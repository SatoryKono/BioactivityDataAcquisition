# 14 Pipeline Hook ABC

## Описание

PipelineHookABC определяет интерфейс хуков наблюдения за выполнением пайплайна. Хуки получают уведомления о старте и завершении пайплайна и стадий, а также об ошибках. Это позволяет реализовать различные механизмы мониторинга, логирования, метрик, уведомлений без изменения основной логики пайплайна. Хуки не вмешиваются в логику выполнения пайплайна — они только получают события и могут выполнять побочные действия (логирование, сбор метрик, отправка уведомлений). Интерфейс не навязывает конкретную реализацию хуков, но гарантирует, что все ключевые события пайплайна будут уведомлены. Методы хуков вызываются оркестратором в соответствующие моменты жизненного цикла пайплайна и стадий.

## Interface

```python
from abc import ABC, abstractmethod
from typing import Any

class PipelineHookABC(ABC):
    @abstractmethod
    def on_pipeline_start(self, pipeline: "PipelineBase") -> None:
        """Вызывается при старте пайплайна."""
        ...

    @abstractmethod
    def on_pipeline_end(self, pipeline: "PipelineBase", result: "RunResult") -> None:
        """Вызывается при завершении пайплайна."""
        ...

    @abstractmethod
    def on_stage_start(self, stage_name: str) -> None:
        """Вызывается при старте стадии. Фиксирует начало выполнения стадии (например, для логирования или метрик)."""
        ...

    @abstractmethod
    def on_stage_end(self, stage_name: str, metrics: dict[str, Any] | None = None) -> None:
        """Вызывается при завершении стадии. Получает информацию о результатах стадии (время выполнения, количество обработанных записей, количество отброшенных записей и т.п.)."""
        ...

    @abstractmethod
    def on_stage_error(self, stage_name: str, error: Exception) -> None:
        """Вызывается при ошибке на стадии. Получает информацию об ошибке (вызывается при обработке исключений, логирует ошибку валидаторов с указанием причины)."""
        ...

    @abstractmethod
    def on_pipeline_error(self, error: Exception) -> None:
        """Вызывается при ошибке пайплайна."""
        ...
```

## Related Components

- **LoggerAdapterABC**: может использоваться для логирования событий
- **TracerABC**: может использоваться для записи метрик
- **ProgressReporterABC**: может получать уведомления о прогрессе
