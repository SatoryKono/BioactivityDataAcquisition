# Полная политика именования — BioETL

**Status**: Draft / Adopted — см. поле "Актуальность" в таблицах.
**Sources**: Основные источники правил и документации перечислены в разделе *Scope and sources of truth* и в конце документа.    

---

## Purpose and scope

Эта Полная политика именования устанавливает детерминированные и машинно-проверяемые правила именования для исходного кода, тестов, конфигурационных файлов и документации проекта `bioetl`. Документ применяется к `src/bioetl/**`, `tests/**`, `docs/**`, `configs/**` и `src/bioetl/qc/` и направлен на единообразие, улучшение читаемости и поддержку автоматической проверки в CI.

**При ссылке на правило используйте его идентификатор в формате `XX.YY` или `Rule ID` (например, `05.01` или `PIPE-001`).**

---

## Scope and sources of truth

Эта политика базируется на официальных руководствах проекта и локальных сводках, которые являются источниками правды:

* `docs/00-styleguide/00-naming-conventions.md` — базовые правила именования и структура документации. 
* `docs/00-styleguide/10-documentation-standards.md` — стандарты синхронизации документации с кодом и правила авто-генерации. 
* `docs/00-styleguide/02-new-entity-naming-policy.md` — матрица директорий, регулярные выражения и требования к CI. 
* Внутренняя сводка проекта (A) — краткие правила и напоминания, используемые при формировании политики. 

Документ — расширение и конкретизация этих источников для слоя `bioetl`.

---

## Table 1 -- Top-level directory layout

|    ID | Component  | Path (relative)         | Описание (не менее 20 слов)                                                                                                                                    | Identifier regexes                                            |       Актуальность |      |
| ----: | ---------- | ----------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------- | -----------------: | ---- |
| 01.01 | Public API | `src/bioetl/api/`       | Публичные фасады и высокоуровневые API-точки, инкапсулирующие сложную логику и предоставляющие стабильный интерфейс для внешнего и внутреннего использования.  | `^[a-z0-9_]+$`                                                |               true |      |
| 01.02 | CLI        | `src/bioetl/cli/`       | Модули командной строки: парсеры аргументов и точки входа, которые обеспечивают управление пайплайнами и утилитами проекта из консоли и CI.                    | `^[a-z0-9_]+$`                                                |               true |      |
| 01.03 | Clients    | `src/bioetl/clients/`   | Адаптеры и реализации клиентов внешних поставщиков данных, включая фабрики, реализации контрактов и реестры для доступа к данным провайдеров.                  | `^[a-z0-9_]+$`                                                |               true |      |
| 01.04 | Core       | `src/bioetl/core/`      | Ядро проекта: общий ETL-примитивы, модели, orchestration primitives и shared validation, используемые многими подсистемами и пайплайнами.                      | `^[a-z0-9_]+$`                                                |               true |      |
| 01.05 | Pipelines  | `src/bioetl/pipelines/` | Пайплайны по провайдерам и сущностям, содержащие стадии ETL, вспомогательные модули и точные точки запуска для обработки и валидации данных.                   | `^src/bioetl/pipelines/[a-z0-9_]+/[a-z0-9_]+/[a-z0-9_]+\.py$` |               true |      |
| 01.06 | Tools      | `src/tools/`            | Инструменты разработки и поддержки: линтеры, миграционные утилиты, инспекции данных и вспомогательные скрипты для разработчиков и CI.                          | `^[a-z0-9_]+$`                                                |               true |      |
| 01.07 | Configs    | `configs/`              | Конфигурационные файлы пайплайнов, провайдеров и окружений в формате YAML/TOML/JSON; имена файлов должны быть в lower_snake_case.                              | `^[a-z0-9_]+.ya?ml$                                           | ^[a-z0-9_]+.json$` | true |
| 01.08 | QC         | `src/bioetl/qc/`        | QC-артефакты: golden datasets, ожидания и метрики, организованные по областям и версиям для обеспечения воспроизводимости и регрессионного контроля.           | `^[a-z0-9_]+$`                                                |               true |      |
| 01.09 | Docs       | `docs/`                 | Документация проекта: styleguides, pipeline docs и индексные страницы, оформленные в kebab-case и пронумерованные для упорядоченного навигационного просмотра. | `^\d{2}-[a-z0-9]+(?:[-_][a-z0-9]+)*\.md$`                     |               true |      |
| 01.10 | Tests      | `tests/`                | Unit, integration, golden и CLI тесты, зеркально повторяющие структуру исходного кода для простоты навигации, запуска и интеграции с CI.                       | `^tests/.+`                                                   |               true |      |

---

## Table 2 -- Enforcement and exceptions

|    ID | Rule ID | Enforcement action                                                                                                                                                                      | Location / artefact                       | Identifier regexes / structure           | Актуальность |
| ----: | ------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------- | ---------------------------------------- | -----------: |
| 02.01 | ENF-001 | Запуск naming-linter в CI; PR блокируется при обнаружении MUST-нарушений, а разработчик получает детальный отчёт с указанием строк и рекомендаций по исправлению.                       | CI job `naming-policy-check`              | linter использует NR-001..NR-010 regex'ы |         true |
| 02.02 | ENF-002 | Pre-commit hook для локальной проверки имен и структуры файлов; настоятельно рекомендуется всем разработчикам для раннего обнаружения проблем до PR.                                    | `.pre-commit-config.yaml` → `naming-lint` | те же regex, что и в CI                  |         true |
| 02.03 | ENF-003 | CI формирует JSON-отчёт и человекочитаемую сводку с примерами нарушений, прикрепляет артефакт и комментирует PR с инструкциями по исправлению.                                          | CI artifacts / PR comment                 | output JSON schema                       |         true |
| 02.04 | ENF-004 | Все исключения регистрируются в `configs/naming_exceptions.yaml` с полями `path`, `rule_id`, `reason`, `owner`, `expiry`; только такие записи позволяют временно обходить MUST-правила. | `configs/naming_exceptions.yaml`          | YAML structure validation                |         true |
| 02.05 | ENF-005 | Нельзя игнорировать MUST-уровневые правила без записи в whitelist; CI блокирует слияние до заполнения записи и одобрения владельца исключения.                                          | CI / repo policy                          | —                                        |         true |

---

## Table 3 -- Правила наименования config (YAML) файлов

|    ID | Rule    | Описание (не менее 20 слов)                                                                                                                                                        |                                 Identifier regexes |       Актуальность |                    |      |
| ----: | ------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------: | -----------------: | ------------------ | ---- |
| 03.01 | CFG-001 | В каталоге `configs/` все имена файлов конфигураций должны быть в lower_snake_case, что позволяет детерминированную загрузку конфигураций и упрощает автоматическое сопоставление. |                                `^[a-z0-9_]+.ya?ml$ | ^[a-z0-9_]+.json$` | true               |      |
| 03.02 | CFG-002 | Конфигурации пайплайнов организуются по провайдерам и сущностям в `configs/pipelines/<provider>/<entity>.yaml` для явной связи конфигурации и соответствующего кода пайплайна.     | `^configs/pipelines/[a-z0-9_]+/[a-z0-9_]+\.ya?ml$` |               true |                    |      |
| 03.03 | CFG-003 | Централизованный файл `configs/providers.yaml` содержит канонический список провайдеров и их метаданные, используемый инструментами валидации и автоматической регистрации.        |                       `^configs/providers\.ya?ml$` |               true |                    |      |
| 03.04 | CFG-004 | Примеры конфигураций и переменных окружения размещаются в `*.example.yaml` или `.env.example`, чтобы шаблоны были доступны, но реальные секреты не хранились в репозитории.        |                     `^[a-z0-9_]+(.example)?.(ya?ml |             json)$ | ^.env(.example)?$` | true |
| 03.05 | CFG-005 | Ключи и имена полей внутри YAML/TOML/JSON конфигураций должны использовать lower_snake_case для согласованности с Python-полями и удобства автоматического сопоставления.          |                           semantic rule (no regex) |               true |                    |      |

---

## Table 4 -- Правила наименования тестов

|    ID | Rule ID | Описание (не менее 20 слов)                                                                                                                                                            |                                                   Identifier regexes |      Актуальность |      |
| ----: | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------: | ----------------: | ---- |
| 04.01 | TS-001  | Unit-тесты должны зеркально повторять структуру исходного кода и находиться в `tests/bioetl/.../test_<module>.py` для однозначной связи теста и тестируемого модуля.                   |                              `^tests/bioetl/.+/test_[a-z0-9_]+\.py$` |              true |      |
| 04.02 | TS-002  | Pipeline-тесты располагаются по шаблону `tests/bioetl/pipelines/<provider>/<entity>/test_<stage>.py`, покрывая конкретные стадии ETL и облегчая запуск тестов по провайдеру.           | `^tests/bioetl/pipelines/[a-z0-9_]+/[a-z0-9_]+/test_[a-z0-9_]+\.py$` |              true |      |
| 04.03 | TS-003  | Интеграционные тесты отделяются от unit-тестов и располагаются либо в `tests/integration/`, либо имеют суффикс `_integration.py` для явного разделения уровней тестирования.           |                                           `^tests/integration/.+.py$ | _integration.py$` | true |
| 04.04 | TS-004  | Golden тесты и сопутствующие артефакты сохраняются в `tests/golden/test_<area>_golden.py` и в каталоге `tests/golden/<area>/<version>/` для версионирования и регрессионного контроля. |                          `^tests/golden/test_[a-z0-9_]+_golden\.py$` |              true |      |
| 04.05 | TS-005  | CLI тесты локализованы в `tests/bioetl/cli/test_<command>.py` и должны проверять поведение CLI в изолированных средах с использованием подходящих фикстур.                             |                             `^tests/bioetl/cli/test_[a-z0-9_]+\.py$` |              true |      |

---

## Table 5 -- Правила наименования Pipelines, Providers, Stages

### 5.A Pipelines — общие правила

|    ID | Rule ID  | Описание (не менее 20 слов)                                                                                                                                                          |                                                                                 Identifier regexes | Актуальность |
| ----: | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------: | -----------: |
| 05.01 | PIPE-001 | Все модули пайплайнов должны располагаться по пути `src/bioetl/pipelines/<provider>/<entity>/<stage>.py` для предсказуемой структуры и простоты навигации между кодом и документами. |                                      `^src/bioetl/pipelines/[a-z0-9_]+/[a-z0-9_]+/[a-z0-9_]+\.py$` |         true |
| 05.02 | PIPE-005 | Для каждой пары `provider/entity` рекомендуется иметь связанный модуль схемы и файл конфигурации, чтобы код, схемы и конфигурации были согласованы и тестируемы.                     | `configs/pipelines/<provider>/<entity>.ya?ml` + `src/bioetl/schemas/<provider>_<entity>_schema.py` |         true |

### 5.B Providers — правила

|    ID | Rule ID  | Описание (не менее 20 слов)                                                                                                                                                              |           Identifier regexes | Актуальность |
| ----: | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------: | -----------: |
| 05.03 | PIPE-002 | Идентификатор провайдера должен быть коротким, состоять из нижнего регистра и быть уникальным в репозитории, это позволяет инструментам автоматически идентифицировать источники данных. |               `^[a-z0-9_]+$` |         true |
| 05.04 | PIPE-006 | Канонический список провайдеров хранится в `configs/providers.yaml` и используется инструментами валидации и регистрацией новых источников данных в проекте.                             | `^configs/providers\.ya?ml$` |         true |

### 5.C Entities — правила

|    ID | Rule ID  | Описание (не менее 20 слов)                                                                                                                                                                   |          Identifier regexes | Актуальность |
| ----: | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------: | -----------: |
| 05.05 | PIPE-003 | `entity` является логической доменной сущностью (activity, assay, publication и т.д.) и должна именоваться в lower_snake_case, что обеспечивает согласованность между провайдерами и схемами. |              `^[a-z0-9_]+$` |         true |
| 05.06 | PIPE-007 | Canonical list of entities может храниться в `configs/entities.yaml` для централизованного контроля и документации сущностей, но это дополнительная рекомендация (SHOULD, не MUST).           | `^configs/entities\.ya?ml$` |        false |

### 5.D Stages — правила

|    ID | Rule ID  | Описание (не менее 20 слов)                                                                                                                                                              | Identifier regexes | Актуальность |          |           |       |     |        |            |         |          |            |      |
| ----: | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -----------------: | -----------: | -------- | --------- | ----- | --- | ------ | ---------- | ------- | -------- | ---------- | ---- |
| 05.07 | PIPE-004 | `stage` должен быть одним из контролируемых токенов (`extract`, `transform`, `validate`, `normalize`, `write`, `run`) для предсказуемой структуры и удобства оркестрации и тестирования. |         `^(extract |    transform | validate | normalize | write | run | errors | descriptor | metrics | backfill | cleanup)$` | true |
| 05.08 | PIPE-008 | Stage-файлы не должны иметь префикс порядкового номера; их имена должны быть описательны и отражать роль стадии, такие как `extract.py` или `validate.py`.                               | `^[a-z0-9_]+\.py$` |         true |          |           |       |     |        |            |         |          |            |      |

---

## Table 6 -- Правила наименования файлов документации и разделов в ней

### 6.A Общие правила документации

|    ID | Rule ID | Описание (не менее 20 слов)                                                                                                                                                            |                        Identifier regexes | Актуальность |      |
| ----: | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------: | -----------: | ---- |
| 06.01 | DOC-001 | Документы в логических сериях должны иметь двузначный префикс `NN-` и использовать kebab-case, что гарантирует корректную сортировку и упрощает навигацию по разделам.                 | `^\d{2}-[a-z0-9]+(?:[-_][a-z0-9]+)*\.md$` |         true |      |
| 06.02 | DOC-002 | Главные индексные страницы и landing pages должны иметь имена `INDEX.md` или `README.md` и являться точкой входа для соответствующих подразделов документации.                         |                                  `^(INDEX | README).md$` | true |
| 06.03 | DOC-003 | Все styleguides должны размещаться в `docs/00-styleguide/` и следовать шаблону `NN-topic-name.md` для согласованной организации и обнаружения руководств по стилю.                        | `^\d{2}-[a-z0-9]+(?:[-_][a-z0-9]+)*\.md$` |         true |      |
| 06.04 | DOC-006 | H1-заголовок документа должен дублировать имя файла в Title Case и содержать краткое описание, чтобы облегчить автоматическую генерацию оглавлений и понятность содержимого.           |                             semantic rule |         true |      |
| 06.05 | DOC-007 | Автогенерируемые секции документации должны иметь явную пометку `<!-- generated -->` и не редактироваться вручную, чтобы сохранялась детерминированность и целостность авто-генерации. |                            tooling marker |         true |      |

### 6.B Pipeline docs — строгие правила

|    ID | Rule ID | Описание (не менее 20 слов)                                                                                                                                                                  |                                                                  Identifier regexes | Актуальность |
| ----: | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------: | -----------: |
| 06.06 | DOC-004 | Pipeline-документы для `provider/entity` размещаются в `docs/pipelines/<provider>/<entity>/NN-<entity>-<provider>-<topic>.md` для строгой связи документа и соответствующего кода пайплайна. | `^docs/pipelines/[a-z0-9_]+/[a-z0-9_]+/\d{2}-[a-z0-9_]+-[a-z0-9_]+-[a-z0-9_]+\.md$` |         true |
| 06.07 | DOC-008 | Якоря внутренних ссылок формируются из заголовков второго уровня и переводятся в kebab-case, что обеспечивает стабильные и удобные ссылки внутри документации.                               |                                                                       semantic rule |         true |
| 06.08 | DOC-009 | Относительные ссылки должны проходить проверку линк-чекером (например `.lychee.toml`) чтобы исключить битые ссылки и обеспечить корректность cross-references.                               |                                                                        tooling rule |         true |

---

## Table 7 — Policy creation and localization (Contract / Default / Impl)

|    ID | Rule / Item                                     | Описание (не менее 20 слов)                                                                                                                                                                         |                                                                                               Identifier regexes / Path | Актуальность |                                              |      |
| ----: | ----------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------: | -----------: | -------------------------------------------- | ---- |
| 07.01 | Three-layer pattern (Contract / Default / Impl) | Рекомендуемый шаблон для новой сущности: контракт (Protocol/ABC), дефолтная фабрика и явные реализации Impl, каждый слой обязан иметь свою ответственность и файл.                                  | Contract: `clients/<domain>/contracts.py`; Default: `clients/<domain>/factories.py`; Impl: `clients/<domain>/impl/*.py` |         true |                                              |      |
| 07.02 | Naming for layers                               | Для каждого слоя однозначные имена: контракт — `<Entity>Protocol` или `<Entity>ABC`; дефолтная фабрика — `default_<domain>_<entity>()`; реализация — `<Domain><Entity>Impl`.                 |                                                                               Class regex: `^[A-Z][A-Za-z0-9]+(Protocol |          ABC | Impl)?$`; Factory fn: `^default_[a-z0-9_]+$` | true |
| 07.03 | Localization — file placement                   | Правила размещения файлов: контракты в `clients/<domain>/contracts.py`, фабрики в `clients/<domain>/factories.py`, реализации в `clients/<domain>/impl/`, реестры в `clients/<domain>/registry.py`. |                                                                                                          Paths as above |         true |                                              |      |
| 07.04 | Registry conventions                            | Реестр фабрик/клиентов размещается в `registry.py` и реализует класс `XClientFactoryRegistry` с методами `register` и `get`; регистрация дефолтов выполняется контролируемо.                        |                                                            File: `^registry\.py$`; Class: `^[A-Z][A-Za-z0-9]+Registry$` |         true |                                              |      |

---

## Table 8 — File-level rules and packaging

|    ID | Rule / Item                 | Описание (не менее 20 слов)                                                                                                                                           |                               Identifier regexes | Актуальность |
| ----: | --------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -----------------------------------------------: | -----------: |
| 08.01 | File naming summary         | Все Python файлы должны называться в формате `snake_case.py`, приватные модули получают ведущий `_`, это упрощает нахождение файлов и автоматическую проверку.        | `^[a-z0-9_]+\.py$`; private: `^_[a-z0-9_]+\.py$` |         true |
| 08.02 | One responsibility per file | Каждый файл реализует одну концептуальную ответственность: фабрика, клиент, реестр или адаптер; допускаются только тесно связанные приватные хелперы в этом же файле. |                                    semantic rule |         true |
| 08.03 | Private module conventions  | Приватные реализации именуются с ведущим `_` и не экспортируются в `__all__`; они хранят скрытую логику, не предназначенную для публичного API.                       |                              `^_[a-z0-9_]+\.py$` |         true |

---

## Table 9 — Documentation rules and sections

|    ID | Rule / Item                 | Описание (не менее 20 слов)                                                                                                                                        | Identifier regexes / tooling | Актуальность |
| ----: | --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------: | -----------: |
| 09.01 | H1 and filename consistency | H1 заголовок документа должен повторять имя файла в Title Case и содержать краткое описание, чтобы автоматизация могла правильно собирать оглавления и метаданные. |                semantic rule |         true |
| 09.02 | Anchors and kebab-case      | Вторичные заголовки (`##`) переводятся в kebab-case anchors; это гарантирует стабильность внутренних ссылок и упрощает автоматическую генерацию ссылок.            |                semantic rule |         true |
| 09.03 | Auto-generated sections     | Автогенерируемые секции помечаются маркером `<!-- generated -->` и не редактируются вручную; изменения делаются через генератор документации.                      |               tooling marker |         true |

---

## Table 10 — Enforcement, tooling and linter guidance

|    ID | Rule / Item                   | Описание (не менее 20 слов)                                                                                                                                                |                                                                                                       Identifier regexes | Актуальность |
| ----: | ----------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -----------------------------------------------------------------------------------------------------------------------: | -----------: |
| 10.01 | Regex catalogue (core)        | Набор базовых регулярных выражений для проверки идентификаторов: модули, классы, функции, константы, исключения и schema/model классы; этот каталог используется лентером. | Modules: `^[a-z0-9_]+$`; Classes: `^[A-Z][A-Za-z0-9]+$`; Functions: `^[a-z_][a-z0-9_]*$`; Constants: `^[A-Z][A-Z0-9_]*$` |         true |
| 10.02 | Linter output and CI behavior | Lинтер обязуется генерировать JSON-отчёт и человекочитаемую сводку; CI job `naming-policy-check` проваливает сборку при MUST-нарушениях и прикладывает отчёт к PR.         |                                                                                                       output JSON schema |         true |
| 10.03 | Whitelist handling            | Lинтер читает `configs/naming_exceptions.yaml` и рассматривает записи как допустимые исключения; каждая запись должна содержать `path, rule_id, reason, owner, expiry`.    |                                                                                                   YAML schema validation |         true |

---

## Table 11 — Examples, snippets and template rules

|    ID | Rule / Item                  | Описание (не менее 20 слов)                                                                                                                                       |          Identifier regexes / Example | Актуальность |      |
| ----: | ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------: | -----------: | ---- |
| 11.01 | Protocol / contracts snippet | Пример протокола показывает сигнатуры методов и аннотации, хранится в `contracts.py` и служит источником истины для реализаций и тестов.                          |     File: `clients/base/contracts.py` |         true |      |
| 11.02 | Factory / Default snippet    | Фабричная функция `default_<domain>_<entity>()` возвращает интерфейс/Protocol и документируется как рекомендуемый способ получения готового клиента.       |      Fn regex: `^default_[a-z0-9_]+$` |         true |      |
| 11.03 | Impl snippet and placement   | Реализации `Impl` размещаются в `impl/` или `data_client.py`, имеют суффикс `Impl`/`HTTPImpl` и обязаны соответствовать контракту, приведённому в `contracts.py`. | Class regex: `^[A-Z][A-Za-z0-9]+(Impl |  HTTPImpl)$` | true |

---

## Table 12 — PR checklist and governance

|    ID | Rule / Item             | Описание (не менее 20 слов)                                                                                                                                          |          Check / Pattern | Актуальность |
| ----: | ----------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -----------------------: | -----------: |
| 12.01 | Class/file name check   | Перед слиянием PR проверяется, что публичные классы и файлы соответствуют паттернам (`PascalCase` / `snake_case.py`) и не содержат запрещённых сочетаний ролей.      |    Automated naming-lint |         true |
| 12.02 | Exports and `__all__`   | Публичные сущности модуля должны быть явно экспортированы через `__all__` в `__init__.py` для контроля публичного API и стабильности импорта.                        |           Semantic check |         true |
| 12.03 | Tests and docs          | Каждая новая публичная сущность сопровождается unit-тестами и примером в документации; интеграционные тесты требуются при взаимодействии с внешними сервисами.       |       PR checklist items |         true |
| 12.04 | Whitelist on exceptions | Нарушения MUST-правил допускаются только при наличии записи в `configs/naming_exceptions.yaml` с обоснованием и владельцем, запись обязана пройти CI/owner approval. | Whitelist entry required |         true |

---

## Политика именования сущностей — краткий свод (с номерами правил)

**Используйте номера правил при ссылках (формат `XX.YY` или Rule ID).**

### Общие принципы

* **Классы**: `PascalCase` — NR-002 (`10.01`).
* **Функции/методы**: `snake_case` — NR-003 (`10.01`).
* **Модули/пакеты**: `snake_case` — NR-001 (`10.01`).
* **Константы**: `UPPER_SNAKE_CASE` — NR-004 (`10.01`).
* **Приватность**: `_leading_underscore` для внутренних имен; дандер — только internals — NR-005/006 (`10.01`).
* **Исключения**: суффикс `Error` — NR-007 (`10.01`).
* **Schemas/Models**: суффикс `Schema` или `Model` — NR-008 (`10.01`).

### Роли классов (с номерами правил)

* **Factory** — суффикс `Factory` (правило 07.05). `Factory` не должен содержать `Registry|Adapter|Facade|Manager|Service` (правило 07.17).
* **ClientFactory** — суффикс `ClientFactory` (правило 07.06).
* **DataClient** — суффикс `DataClient` (правило 07.07).
* **Client** — суффикс `Client` (правило 07.08).
* **Facade** — суффикс `Facade` (правило 07.09).
* **Registry** — суффикс `Registry` (правило 07.10).
* **Adapter / Transport** — суффиксы `Adapter`/`Transport`, приватные реализации с `_` (правило 07.11).
* **Builder** — суффикс `Builder`/`FactoryBuilder` (правило 07.12).
* **Protocol / ABC** — суффиксы `Protocol`/`ABC` (правило 07.13).
* **Config / Model / Options / Params** — соответствующие суффиксы (правило 07.14).
* **Error** — суффикс `Error` для исключений (правило 07.15).
* **Mixin** — суффикс `Mixin` (правило 07.16).

(См. подробные таблицы: Table 7 и Table 11.)

### Функции/методы — префиксы (правило 07.18)

* `get_` — локальные дешёвые чтения (07.18).
* `fetch_` — сетевые/IO чтения (07.18).
* `iter_` — ленивые генераторы/итераторы (07.18).
* `create_|build_|make_|default_` — создание/фабрики (07.18).
* `register_` — регистрация в реестре (07.18).
* `resolve_|ensure_` — нормализация/подготовка (07.18).
* `parse_|serialize_|validate_` — валидация и парсинг (07.18).
* `on_` — callback / обработчики (07.18).
* `is_|has_|can_` — булевы проверки (07.18).

---

## Enforcement and tooling (кратко)

* Linter использует каталог регулярных выражений (Table 10, правило 10.01) и генерирует JSON-отчёты; CI job `naming-policy-check` (02.01/ENF-001) проваливает сборку при MUST-нарушениях.
* Pre-commit hook (`ENF-002`) рекомендуется для локальной проверки.
* Whitelist `configs/naming_exceptions.yaml` (ENF-004) обязателен для исключений; каждая запись должна содержать `path, rule_id, reason, owner, expiry`.

---

## Примеры кода (шаблоны)

### Protocol

```py
# src/bioetl/clients/base/contracts.py
from typing import Protocol, Iterator

class DataClientProtocol(Protocol):
    def fetch_one(self, request: 'ClientRequest') -> dict: ...
    def iter_pages(self, params: 'PaginationParams') -> Iterator[dict]: ...
```

### Default factory

```py
# src/bioetl/clients/chembl/factories.py
from ..base.contracts import DataClientProtocol
from .impl.http_impl import ChemblDataClientHTTPImpl

def default_chembl_data_client(api_key: str, *, timeout: float = 30.0) -> DataClientProtocol:
    """Return a ready-to-use ChemblDataClient with recommended settings."""
    return ChemblDataClientHTTPImpl(api_key=api_key, timeout=timeout)
```

### Impl

```py
# src/bioetl/clients/chembl/impl/http_impl.py
class ChemblDataClientHTTPImpl:
    def __init__(self, api_key: str, timeout: float = 30.0):
        self.api_key = api_key
        self.timeout = timeout

    def fetch_one(self, request):
        # реализация
        ...
```

---

## PR checklist (коротко)

* [ ] Имена публичных классов и файлов соответствуют паттернам и ролям (см. правила 07.05–07.16 и NR-002..NR-008).
* [ ] Публичный API экспортирован через `__all__` в `__init__.py` (12.02).
* [ ] Для клиента присутствует `default_*` фабрика (07.02).
* [ ] Добавлен контракт (Protocol/ABC) при необходимости (07.01–07.03).
* [ ] Добавлены unit-тесты и при необходимости integration tests (04.01–04.03).
* [ ] Документация и примеры обновлены (06.06–06.08).
* [ ] При исключениях заполнена запись в `configs/naming_exceptions.yaml` и согласована с владельцем (02.04).

---

## References

* `00-naming-conventions.md` — базовый документ по именованию. 
* `10-documentation-standards.md` — стандарты документации и синхронизации с кодом. 
* `02-new-entity-naming-policy.md` — матрица директорий, regex-справочник и enforcement. 
* Internal summary (A) — краткая памятка по проекту. 

---

