# Documentation Standards

This document defines the standards for documentation in the `bioetl` project.
All documentation **MUST** be synchronized with code and schemas.

## Principles

- **Synchronization**: Documentation **MUST** be synchronized with code and
  schemas. Any change to public contracts, ABCs, Default factories, Impl or
  pipeline configuration **MUST** be reflected in the docs at the same PR.
- **No Manual Editing**: Auto-generated sections **SHALL NOT** be edited
  manually; they must be produced by the generator.
- **Contract Changes**: Any contract changes **MUST** be documented immediately.
- **CHANGELOG**: Breaking changes **MUST** be recorded in CHANGELOG.md.

## File Naming Conventions

All documentation files **MUST** follow `00-naming-conventions.md`:
`NN-<entity>-<provider>-<topic>.md` for pipeline docs and kebab-case for filenames.

**Underscores (`_`) MUST NOT be used** in documentation filenames. Only hyphens (`-`) are allowed.

## Documentation for new entities and pipelines

**MUST**s:

- When adding a **new entity** (contract / pipeline / client), the PR **MUST** include:
  1. New or updated documentation under `docs/02-pipelines/<provider>/<entity>/` using the filename pattern `NN-<entity>-<provider>-<topic>.md`.
  2. An entry/update in the human-readable registry (`docs/ABC_INDEX.md`) if the ABC/contract is added.
  3. Updates to machine registries: `src/bioetl/clients/base/abc_registry.yaml` and `src/bioetl/clients/base/abc_impls.yaml` when creating ABC/Default/Impl (see `01-new-entity-implementation-policy.md`).
- Documentation sections that explain implementation-specific details **MUST** be updated when implementation changes (e.g. new Default factory, new Impl class, changes in factory signature).

**SHOULD**s:

- Pipeline docs **SHOULD** include a section that maps the pipeline to:
  - Code module path (e.g. `src/bioetl/pipelines/chembl/activity/extract.py`)
  - Config file(s): `configs/pipelines/<provider>/<entity>.yaml`
  - Schema module(s): `src/bioetl/schemas/<provider>_<entity>_schema.py`
  - Registry entries: `abc_registry.yaml` / `abc_impls.yaml`

## Auto-generated Sections

- Auto-generated sections **MUST** be marked: `<!-- generated -->`.
- Any auto-generation scripts **MUST** record their generator and timestamp in the autogenerated block.

## Change management for entity/ABC changes

- Changes to ABCs (Protocol/ABC) **MUST** be accompanied with:
  - Updated docstring on the ABC (structured block: brief description, public interface, file path, default pointer).
  - Updated `abc_impls.yaml` and `abc_registry.yaml`.
  - Documentation updates in `docs/ABC_INDEX.md` and pipeline docs referencing the ABC.
- CI **MUST** enforce that PRs changing ABCs/Defaults/Impls update the documentation checklist.

## Examples and Cross-references

- Pipeline base: `docs/02-pipelines/00-pipeline-base.md`
- ABC index: `docs/ABC_INDEX.md`
- Naming conventions: `00-naming-conventions.md`
- Entity naming: `02-new-entity-naming-policy.md` and `01-new-entity-implementation-policy.md`

