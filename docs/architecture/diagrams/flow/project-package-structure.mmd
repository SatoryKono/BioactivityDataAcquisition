---
id: e68c4503-315d-4046-98fd-934e38b85e98
---
flowchart LR

classDef componentPrimary   fill:#f5f5f5,stroke:#444,stroke-width:1.5px,color:#111,font-size:22px;
classDef componentSecondary fill:#e3e7ec,stroke:#555,stroke-width:1.2px,color:#111,font-size:18px;
classDef external           fill:#dde7f2,stroke:#44546a,stroke-width:1.5px,color:#111,font-size:22px;
classDef group              fill:#e6ecef,stroke:#333,stroke-width:1.5px,color:#111,font-size:22px;

subgraph User["Пользователь / CLI"]
  CLI["CLI (main.py)"]:::componentPrimary
end
class User group;

subgraph Interfaces["Interfaces (Ports)"]
  IF_Pipeline["PipelineBase / ChemblPipelineBase\nbioetl.application.pipelines.base"]:::componentPrimary
  IF_Client["BaseClient / SourceClientABC\nbioetl.interfaces.clients"]:::componentSecondary
  IF_Logger["LoggerAdapterABC\nbioetl.interfaces.logging"]:::componentSecondary
  IF_Writer["WriterABC / UnifiedOutputWriterABC\nbioetl.interfaces.output"]:::componentSecondary
  IF_Validator["ValidatorABC\nbioetl.interfaces.validation"]:::componentSecondary
end
class Interfaces group;

subgraph Application["Application Layer (Оркестрация)"]
  Pipelines["Pipelines\nbioetl.application.pipelines.chembl"]:::componentPrimary
  Runtime["Pipeline Runtime / Runner\nbioetl.application.runtime"]:::componentSecondary
end
class Application group;

subgraph Domain["Domain Layer"]
  DomainCore["Domain Models & Transformations\nbioetl.domain.*"]:::componentPrimary
  Schemas["Pandera Schemas\nbioetl.schemas.*"]:::componentSecondary
  Services["Domain Services\nNormalization, Validation Facades"]:::componentSecondary
end
class Domain group;

subgraph Infrastructure["Infrastructure Layer"]
  Clients["ChEMBL Clients\nbioetl.clients.chembl"]:::componentPrimary
  Output["Writers & Storage\nbioetl.infrastructure.output"]:::componentSecondary
  Logging["Unified Logger\nbioetl.infrastructure.logging"]:::componentSecondary
  Config["Config / Resolver\nbioetl.infrastructure.config"]:::componentSecondary
  QC["QC / Golden Data\nbioetl.infrastructure.qc"]:::componentSecondary
end
class Infrastructure group;

ext_api[(ChEMBL REST API)]:::external
fs[(File system: CSV/Parquet, metadata)]:::external

CLI --> Runtime
Runtime --> Pipelines
Pipelines --> IF_Pipeline
Pipelines --> IF_Client
Pipelines --> IF_Writer
Pipelines --> IF_Validator
Pipelines --> IF_Logger
Pipelines --> Config
Pipelines --> QC
IF_Pipeline --> DomainCore
IF_Pipeline --> Schemas
IF_Pipeline --> Services
IF_Client --> Clients
Clients --> ext_api
IF_Writer --> Output
Output --> fs
IF_Validator --> Services
Services --> Schemas
IF_Logger --> Logging