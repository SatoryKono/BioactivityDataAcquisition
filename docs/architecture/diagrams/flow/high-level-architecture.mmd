graph TB
    subgraph Interfaces ["Interfaces (Driving)"]
        CLI[CLI App]
        RestAPI[REST Server]
        MQ[MQ Listener]
    end

    subgraph Infrastructure ["Infrastructure (Driven)"]
        subgraph Input
            ChEMBL[ChEMBL Client]
            PubChem[PubChem Client]
        end
        subgraph Output
            Writer[Unified Output Writer]
            Logger[Unified Logger]
        end
        subgraph Config
            CfgLoad[Config Loader]
            Pydantic[Pydantic Models]
        end
    end

    subgraph Application ["Application Layer"]
        Pipeline[Pipeline Orchestrator]
        Hooks[Pipeline Hooks]
    end

    subgraph Domain ["Domain Layer (Core)"]
        Validation[Validation Service]
        Normalization[Normalization Service]
        Hashing[Hash Service]
        Schemas[Pandera Schemas]
    end

    CLI -->|Calls| Pipeline
    Pipeline -->|Uses| Validation
    Pipeline -->|Uses| Normalization
    Pipeline -->|Uses| Hashing
    
    Validation -->|Validates| Schemas
    Normalization -.->|Uses| Schemas

    Pipeline -->|Uses| ChEMBL
    Pipeline -->|Uses| Writer
    Pipeline -->|Uses| Logger
    Pipeline -->|Configures| CfgLoad

    style Domain fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    style Application fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style Infrastructure fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style Interfaces fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px

