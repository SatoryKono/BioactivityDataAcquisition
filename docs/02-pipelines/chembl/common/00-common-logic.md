# 00 Common Logic

## Роль ChemblCommonPipeline
Общий базовый класс для ChEMBL-пайплайнов, расширяющий ChemblPipelineBase и инкапсулирующий типовой жизненный цикл: подготовка дескриптора, извлечение данных через ChemblExtractionService, трансформация, валидация и запись.

## ChemblDescriptorFactory
Фабрика дескрипторов формирует параметры извлечения (endpoint, фильтры, release, размер страниц) для каждой сущности. Это позволяет переиспользовать конфигурацию и минимизировать дублирование кода в конкретных пайплайнах.

## Жизненный цикл
1. Подготовка дескриптора и клиента в `prepare_run`.
2. Запуск extract с пагинацией и лимитами.
3. Transform с нормализацией, привязкой идентификаторов и расчётом хешей.
4. Validate по схемам из SchemaRegistry.
5. Write с атомарной записью таблиц, meta.yaml, QC и checksums.
6. finalize_run закрывает клиент и сохраняет метрики.

## Конфигурация и переопределения
Общие параметры (release, pagination, rate limits, output_dir) задаются в YAML-конфиге. Конкретные пайплайны переопределяют трансформеры, нормализаторы и схемы, но наследуют общие хуки и настройки извлечения.
