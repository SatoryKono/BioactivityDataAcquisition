# 29 Secret Provider

## Описание

`EnvSecretProvider` — провайдер секретов, основанный на переменных окружения и файлах `.env`. Обеспечивает доступ к секретным настройкам (пароли, ключи) и переменным окружения для конфигурации пайплайна.

## Модуль

`src/bioetl/core/config/config_resolver.py`

## Наследование

Провайдер реализует интерфейс `SecretProviderABC` и предоставляет реализацию работы с переменными окружения.

## Основные методы

### `get_secret(self, name: str) -> str`

Получает секрет по имени из переменных окружения или файла `.env`.

**Параметры:**
- `name` — имя секрета/переменной

**Возвращает:** значение секрета (строка).

**Процесс:**
1. Поиск в переменных окружения
2. Поиск в файле `.env` (если используется)
3. Выброс исключения, если секрет не найден

### `get_variable(self, name: str) -> str`

Получает переменную окружения по имени.

**Параметры:**
- `name` — имя переменной

**Возвращает:** значение переменной (строка).

### `iter_variables(self) -> Mapping[str, str]`

Итерирует по всем доступным переменным окружения.

**Возвращает:** словарь с переменными окружения.

## Файл .env

Провайдер поддерживает загрузку переменных из файла `.env`:
- Автоматическая загрузка при инициализации
- Поддержка комментариев и пустых строк
- Приоритет переменных окружения над файлом `.env`

## Безопасность

Провайдер обеспечивает безопасное хранение секретов:
- Секреты не логируются
- Поддержка различных источников (env, файлы, секрет-менеджеры)
- Валидация наличия обязательных секретов

## Related Components

- **SecretProviderABC**: интерфейс провайдера секретов (см. `docs/01-ABC/21-secret-provider-abc.md`)
- **FileConfigResolver**: использует провайдер для получения секретов (см. `docs/02-pipelines/config/28-config-resolver.md`)

