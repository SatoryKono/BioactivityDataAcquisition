# 00 HTTP Cache

## Описание

`InMemoryTTLCacheImpl` — потокобезопасный кэш HTTP-ответов с истечением (TTL) в памяти (либо файле). Используется для кэширования результатов API вызовов в течение заданного времени.

## Модуль

`src/bioetl/core/http/cache.py`

## Наследование

Кэш реализует интерфейс `CacheABC` (CacheStrategy) и предоставляет потокобезопасную реализацию кэширования.

## Основные методы

### `@staticmethod make_key(method: str, url: str, params: Mapping[str, Any] | None, headers: Mapping[str, str] | None) -> str`

Создаёт ключ кэша на основе параметров запроса.

**Параметры:**
- `method` — HTTP-метод (GET, POST и т.д.)
- `url` — URL запроса
- `params` — параметры запроса (опционально)
- `headers` — заголовки запроса (опционально)

**Возвращает:** строковый ключ для кэша.

### `get(self, key: str) -> bytes | None`

Получает значение из кэша по ключу.

**Параметры:**
- `key` — ключ кэша

**Возвращает:** закэшированные данные (bytes) или `None`, если ключ отсутствует или истёк TTL.

### `set(self, key: str, value: bytes) -> None`

Сохраняет значение в кэш с TTL.

**Параметры:**
- `key` — ключ кэша
- `value` — данные для кэширования (bytes)

## TTL (Time To Live)

Кэш автоматически удаляет записи по истечении TTL, что позволяет:
- Контролировать актуальность данных
- Управлять использованием памяти
- Обеспечивать автоматическую очистку устаревших данных

## Потокобезопасность

Реализация обеспечивает потокобезопасный доступ к кэшу, что позволяет использовать его в многопоточных средах.

## Related Components

- **CacheABC**: интерфейс кэша (см. `docs/01-ABC/01-cache-abc.md`)
- **RequestsBackend**: может использовать кэш для кэширования ответов (см. `docs/02-pipelines/chembl/common/03-chembl-requests-backend.md`)

